{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/select.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/select.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/select.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/select.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/select.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/select.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8P,GAC3R,4BACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/update.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/update.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/update.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/update.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/update.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/update.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8P,GAC3R,4BACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/chart.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/chart.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/chart.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAiR,GAC9S,+CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/chart.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/chart.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/chart.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6P,GAC1R,2BACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/actions.ts"],"sourcesContent":["'use server';\n\nimport * as mongoDB from \"mongodb\";\nimport { sub } from 'date-fns';\nimport { revalidatePath } from \"next/cache\";\n\nconst client = new mongoDB.MongoClient(\"mongodb://blitz:27017\");\nlet db: mongoDB.Db | null = null;\nlet range: string = \"day\";\nlet degree: string = \"fahrenheit\";\n\ninterface Item {\n    time: string;\n    temp: number;\n}\nlet temps: Item[] = [];\n\nasync function connect() {\n    await client.connect();\n    db = client.db(\"wine\");\n    console.log(\"Connected to MongoDB\");\n}\n\nfunction halfSize(rawTemps: mongoDB.WithId<mongoDB.BSON.Document>[]): mongoDB.WithId<mongoDB.BSON.Document>[] {\n    console.log('starting length: ', rawTemps.length);\n    var newTemps: mongoDB.WithId<mongoDB.BSON.Document>[] = [];\n    var prevTime = '';\n    var prevItem: mongoDB.WithId<mongoDB.BSON.Document> | null = null;\n    for (var item of rawTemps) {\n        if (prevTime === '') {\n            prevItem = item;\n            prevTime = item.time;\n        } else {\n            var d1msecs = (prevItem!.time as Date).getTime();\n            var d2msecs = (item.time as Date).getTime();\n            var avgTime = (d1msecs + d2msecs) / 2;\n            var result = new Date(avgTime);\n            var temp = (prevItem!.value + item.value) / 2;\n            newTemps.push({ _id: item._id, time: result, value: temp });\n            prevTime = '';\n        }\n    }\n    console.log('new length: ', newTemps.length);\n    return newTemps;\n}\n\nexport async function getTemps() {\n    if (!db) {\n        await connect();\n    }\n    var delta = 0;\n    switch (range) {\n        case \"all\": delta = 24 * 365; break;\n        case 'hour': delta = 1; break;\n        case '2hours': delta = 2; break;\n        case '6hours': delta = 6; break;\n        case '12hours': delta = 12; break;\n        case 'day': delta = 24; break;\n        case '2day': delta = 48; break;\n        case 'week': delta = 7 * 24; break;\n        case 'month': delta = 30 * 24; break;\n    }\n    var compare = new Date();\n    // console.log('Today is: ' + compare.toISOString());\n    compare = sub(compare, { hours: delta });\n    var search = { \"time\": { $gt: compare } };\n    // console.log(search);\n    var rawTemps = await db!.collection(\"temps\").find(search, { sort: [[\"time\", \"desc\"]] }).toArray();\n    temps = [];\n    while (rawTemps.length > 4000) {\n        rawTemps = halfSize(rawTemps);\n    }\n    rawTemps.forEach(doc => {\n        // console.log('time: ', doc.time.toISOString(), doc.value);\n        doc.time = doc.time.toISOString();\n        temps.push({ time: doc.time, temp: degree == 'celsius' ? doc.value : ((doc.value * 9 / 5) + 32) });\n    });\n    // console.log(temps)\n    console.log(\"Sending \", temps.length, \"records\");\n    return { temps: temps, degree: degree, range: range };\n}\n\nexport async function setRange(newRange: string) {\n    range = newRange;\n    console.log(\"Range set to \", range);\n    revalidatePath(\"/\");\n}\nexport async function setDegree(newDegree: string) {\n    degree = newDegree;\n    console.log(\"Degree set to \", degree);\n    revalidatePath(\"/\");\n}"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;;;;;;AAEA,MAAM,SAAS,IAAI,sHAAmB,CAAC;AACvC,IAAI,KAAwB;AAC5B,IAAI,QAAgB;AACpB,IAAI,SAAiB;AAMrB,IAAI,QAAgB,EAAE;AAEtB,eAAe;IACX,MAAM,OAAO,OAAO;IACpB,KAAK,OAAO,EAAE,CAAC;IACf,QAAQ,GAAG,CAAC;AAChB;AAEA,SAAS,SAAS,QAAiD;IAC/D,QAAQ,GAAG,CAAC,qBAAqB,SAAS,MAAM;IAChD,IAAI,WAAoD,EAAE;IAC1D,IAAI,WAAW;IACf,IAAI,WAAyD;IAC7D,KAAK,IAAI,QAAQ,SAAU;QACvB,IAAI,aAAa,IAAI;YACjB,WAAW;YACX,WAAW,KAAK,IAAI;QACxB,OAAO;YACH,IAAI,UAAU,AAAC,SAAU,IAAI,CAAU,OAAO;YAC9C,IAAI,UAAU,AAAC,KAAK,IAAI,CAAU,OAAO;YACzC,IAAI,UAAU,CAAC,UAAU,OAAO,IAAI;YACpC,IAAI,SAAS,IAAI,KAAK;YACtB,IAAI,OAAO,CAAC,SAAU,KAAK,GAAG,KAAK,KAAK,IAAI;YAC5C,SAAS,IAAI,CAAC;gBAAE,KAAK,KAAK,GAAG;gBAAE,MAAM;gBAAQ,OAAO;YAAK;YACzD,WAAW;QACf;IACJ;IACA,QAAQ,GAAG,CAAC,gBAAgB,SAAS,MAAM;IAC3C,OAAO;AACX;AAEO,eAAe;IAClB,IAAI,CAAC,IAAI;QACL,MAAM;IACV;IACA,IAAI,QAAQ;IACZ,OAAQ;QACJ,KAAK;YAAO,QAAQ,KAAK;YAAK;QAC9B,KAAK;YAAQ,QAAQ;YAAG;QACxB,KAAK;YAAU,QAAQ;YAAG;QAC1B,KAAK;YAAU,QAAQ;YAAG;QAC1B,KAAK;YAAW,QAAQ;YAAI;QAC5B,KAAK;YAAO,QAAQ;YAAI;QACxB,KAAK;YAAQ,QAAQ;YAAI;QACzB,KAAK;YAAQ,QAAQ,IAAI;YAAI;QAC7B,KAAK;YAAS,QAAQ,KAAK;YAAI;IACnC;IACA,IAAI,UAAU,IAAI;IAClB,qDAAqD;IACrD,UAAU,IAAA,yIAAG,EAAC,SAAS;QAAE,OAAO;IAAM;IACtC,IAAI,SAAS;QAAE,QAAQ;YAAE,KAAK;QAAQ;IAAE;IACxC,uBAAuB;IACvB,IAAI,WAAW,MAAM,GAAI,UAAU,CAAC,SAAS,IAAI,CAAC,QAAQ;QAAE,MAAM;YAAC;gBAAC;gBAAQ;aAAO;SAAC;IAAC,GAAG,OAAO;IAC/F,QAAQ,EAAE;IACV,MAAO,SAAS,MAAM,GAAG,KAAM;QAC3B,WAAW,SAAS;IACxB;IACA,SAAS,OAAO,CAAC,CAAA;QACb,4DAA4D;QAC5D,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,WAAW;QAC/B,MAAM,IAAI,CAAC;YAAE,MAAM,IAAI,IAAI;YAAE,MAAM,UAAU,YAAY,IAAI,KAAK,GAAI,AAAC,IAAI,KAAK,GAAG,IAAI,IAAK;QAAI;IACpG;IACA,qBAAqB;IACrB,QAAQ,GAAG,CAAC,YAAY,MAAM,MAAM,EAAE;IACtC,OAAO;QAAE,OAAO;QAAO,QAAQ;QAAQ,OAAO;IAAM;AACxD;AAEO,eAAe,SAAS,QAAgB;IAC3C,QAAQ;IACR,QAAQ,GAAG,CAAC,iBAAiB;IAC7B,IAAA,+IAAc,EAAC;AACnB;AACO,eAAe,UAAU,SAAiB;IAC7C,SAAS;IACT,QAAQ,GAAG,CAAC,kBAAkB;IAC9B,IAAA,+IAAc,EAAC;AACnB;;;IA7CsB;IAoCA;IAKA;;AAzCA,+OAAA;AAoCA,+OAAA;AAKA,+OAAA","debugId":null}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///Users/raimundege/WineStorage/wine-next/app/page.tsx"],"sourcesContent":["import Select from \"./select\"\nimport Update from \"./update\";\nimport Chart from \"./chart\";\nimport { getTemps } from \"./actions\";\n\nexport default async function Home() {\n  const data = await getTemps();\n\n  return (\n    <main className='container mx-auto p-2'>\n      <div className=\"grid grid-cols-2 text-sm\">\n        <Select data={data} />\n        <Update data={data} />\n      </div>\n      <Chart data={data} />\n    </main>\n\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,eAAe;IAC5B,MAAM,OAAO,MAAM,IAAA,0HAAQ;IAE3B,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,yHAAM;wBAAC,MAAM;;;;;;kCACd,8OAAC,yHAAM;wBAAC,MAAM;;;;;;;;;;;;0BAEhB,8OAAC,wHAAK;gBAAC,MAAM;;;;;;;;;;;;AAInB","debugId":null}}]
}